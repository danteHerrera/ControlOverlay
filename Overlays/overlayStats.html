<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scorebug</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="css/style5.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500;700;900&display=swap" rel="stylesheet">
</head>
<body>

    <div class="statbox">
        <img src="images/scorebug/boostandStats - Blue.png" id="image" class="statbox-img"> <!-- RADIAL GRADIENT FOR BOOST -->
        <div class="info">
            <div class="headers">
                <h3 class="score header">Score</h3>
                <h3 class="goals header">Goals</h3>
                <h3 class="shots header">Shots</h3>
                <h3 class="saves header">Saves</h3>
                <h3 class="assists header">Assists</h3>
            </div>
            <div class="statsDiv">
                <div class="score stats"><h3 class="stat header">9999</h3></div>
                <div class="goals stats"><h3 class="stat header">9999</h3></div>
                <div class="shots stats"><h3 class="stat header">9999</h3></div>
                <div class="saves stats"><h3 class="stat header">9999</h3></div>
                <div class="assists stats"><h3 class="stat header">9999</h3></div>
            </div>
        </div>
        <div class="playerName"><h2>playerName</h2></div>
    </div>

    <script type="module">
        import { WsSubscribers } from '../scripts/WS.js';

    $(() => {
        WsSubscribers.init(49322, true);

        WsSubscribers.subscribe("game", "match_created", () => {
            //display none
        });

        WsSubscribers.subscribe("game", "update_state", (d) => {
            let focusPlayer = d.game.target
            let playerObj = d.players[focusPlayer]
            try {
        
                if (d.players[focusPlayer].team == 0) {

                $('body').css('display', 'block');
                $('.statbox-img').attr("src", "images/scorebug/boostandStats - Blue.png")
                
                } else if (d.players[focusPlayer].team == 1) {

                $('body').css('display', 'block');
                $('.statbox-img').attr("src", "images/scorebug/boostandStats - Orange.png")

                } 

            } catch (e) {

                $('body').css('display', 'none');

            };

            $('.score.stats .stat.header').text(playerObj['score']);
            $('.goals.stats .stat.header').text(playerObj['goals']);
            $('.shots.stats .stat.header').text(playerObj['shots']);
            $('.saves.stats .stat.header').text(playerObj['saves']);
            $('.assists.stats .stat.header').text(playerObj['assists']);
            $('.playerName h2').text(playerObj['name']);


            
        });
        
    });

    </script>
</body>
</html>